{% layout 'gift_card' %}

{%- assign formatted_initial_value = gift_card.initial_value | money_without_trailing_zeros: gift_card.currency -%}
{%- assign formatted_initial_value_stripped = formatted_initial_value | strip_html -%}

<header class="giftcard__header text-center" role="banner">
  <div class="site-header__logo h1 text-center">
    <svg width="124px" height="24px" viewBox="0 0 124 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="360design_logo" fill="#232323" fill-rule="nonzero">
              <g id="Group" transform="translate(66.393621, 0.000000)">
                  <path d="M28.8063788,6.6 C29.0063788,5.2 29.4063788,3.8 29.9063788,2.5 C30.2063788,1.8 28.4063788,0.7 28.1063788,1.5 C27.6063788,2.8 27.2063788,4.2 27.0063788,5.6 C26.8063788,6.4 28.6063788,7.5 28.8063788,6.6 Z" id="Path"></path>
                  <path d="M12.9063788,1.1 C12.9063788,0.6 12.2063788,0.1 11.7063788,0 C11.6063788,0 11.6063788,0 11.5063788,0 L11.5063788,0 C11.4063788,0 11.2063788,0.1 11.2063788,0.2 C11.2063788,0.2 11.2063788,0.3 11.2063788,0.3 C9.60637876,5 8.40637876,7.7 6.00637876,12 C5.90637876,12.1 5.80637876,12.3 5.70637876,12.5 C4.70637876,11.8 3.30637876,11.9 2.30637876,12.9 C0.906378764,14.3 0.206378764,16.4 0.00637876404,18.3 C-0.093621236,18.9 1.00637876,19.8 1.60637876,19.5 C3.80637876,18.3 5.40637876,16.6 6.80637876,14.7 C6.50637876,16.1 6.10637876,17.5 5.90637876,19 C5.80637876,19.8 7.50637876,20.8 7.70637876,20 C8.80637876,12.8 10.6063788,8.1 12.9063788,1.3 C12.9063788,1.2 12.9063788,1.2 12.9063788,1.1 Z M2.20637876,16.6 C2.30637876,16.3 2.50637876,16 2.60637876,15.7 C2.90637876,15.2 3.20637876,14.7 3.60637876,14.3 C3.80637876,14 4.10637876,13.7 4.40637876,13.6 C4.50637876,13.6 4.60637876,13.5 4.70637876,13.5 C4.70637876,13.5 4.80637876,13.5 4.80637876,13.5 C4.10637876,14.7 3.30637876,15.7 2.20637876,16.6 Z" id="Shape"></path>
                  <path d="M55.6063788,5.9 C53.6063788,7.2 51.4063788,8.6 49.3063788,10 C49.6063788,9 50.0063788,8 50.4063788,7.1 C50.7063788,6.4 49.5063788,5.4 48.8063788,5.8 C47.2063788,6.6 45.8063788,7.5 44.5063788,8.7 C44.5063788,8.7 44.5063788,8.6 44.6063788,8.6 C44.9063788,7.9 43.1063788,6.8 42.8063788,7.6 C42.8063788,7.6 42.8063788,7.6 42.8063788,7.6 C41.3063788,8.5 39.9063788,9.4 38.2063788,10.7 C38.3063788,10.4 38.3063788,10 38.4063788,9.7 C38.5063788,9 37.4063788,8.2 36.8063788,8.5 C36.7063788,8.5 36.7063788,8.6 36.6063788,8.6 C35.5063788,7.4 33.8063788,7.4 32.7063788,8.5 C32.3063788,8.8 31.9063788,9.3 31.6063788,9.8 C30.2063788,11.2 27.7063788,13 26.6063788,13.4 C26.6063788,13.3 26.7063788,13.1 26.7063788,13 C26.9063788,11.9 27.3063788,11 27.7063788,10 C28.0063788,9.3 26.3063788,8.2 25.9063788,9 C25.7063788,9.4 25.5063788,9.9 25.3063788,10.4 C24.6063788,10.8 23.5063788,11.3 22.4063788,12 C22.2063788,11.9 22.0063788,11.7 21.9063788,11.6 C21.5063788,11.2 21.0063788,10.1 22.0063788,10 C22.5063788,10 22.4063788,9.4 22.2063788,9.1 C21.9063788,8.7 21.4063788,8.4 20.9063788,8.4 C19.3063788,8.5 19.3063788,10.2 20.0063788,11.2 C18.3063788,12.9 14.2063788,15.8 12.3063788,16.2 C12.3063788,16 12.4063788,15.7 12.4063788,15.5 C12.4063788,15.5 12.4063788,15.5 12.4063788,15.5 C13.5063788,14.8 17.4063788,12.6 15.4063788,11 C14.0063788,9.9 12.5063788,11.3 11.7063788,12.4 C10.8063788,13.7 9.70637876,16.1 11.0063788,17.5 C11.9063788,18.4 12.9063788,18.1 13.9063788,17.6 C16.5063788,16.2 18.7063788,14.1 20.9063788,12.2 C21.1063788,12.4 21.3063788,12.5 21.5063788,12.7 C20.0063788,14.4 19.0063788,16.3 20.9063788,17.5 C22.7063788,18.6 23.9063788,16.4 23.9063788,14.9 C23.9063788,14.4 23.8063788,14 23.6063788,13.5 C23.9063788,13.2 24.3063788,12.9 24.7063788,12.6 C24.7063788,12.9 24.7063788,13.1 24.7063788,13.4 C24.9063788,14.6 26.2063788,15.6 27.4063788,15.2 C28.5063788,14.8 29.4063788,13.9 30.2063788,13.2 C30.3063788,13.1 30.4063788,13 30.5063788,13 C30.4063788,13.3 30.4063788,13.6 30.4063788,13.9 C30.3063788,14.5 31.4063788,15.5 32.0063788,15.1 C33.7063788,14.2 34.8063788,12.5 36.2063788,11.2 C36.1063788,11.9 35.9063788,12.6 35.8063788,13.3 C35.1063788,14.2 34.5063788,14.6 33.9063788,15.6 C32.2063788,18.6 31.8063788,19 33.7063788,22.3 C33.9063788,22.7 35.2063788,23.8 35.4063788,22.9 C36.7063788,18.8 36.7063788,18.7 37.5063788,14.4 C38.8063788,12.8 40.2063788,11.4 41.9063788,10.2 C41.7063788,10.9 41.6063788,11.7 41.5063788,12.4 C41.4063788,13 42.8063788,14.2 43.2063788,13.5 C44.3063788,11.7 45.7063788,10.2 47.4063788,8.9 C47.2063788,9.6 47.0063788,10.2 47.0063788,10.9 C47.0063788,12 48.2063788,12.9 49.2063788,12.5 C50.3063788,12.1 51.2063788,11.1 52.1063788,10.4 C53.5063788,9.2 54.9063788,8.1 56.4063788,7.1 C57.2063788,6.5 56.3063788,5.5 55.6063788,5.9 Z M33.1063788,11.4 C33.1063788,11.4 33.1063788,11.3 33.2063788,11.3 C33.5063788,10.8 33.8063788,10.3 34.2063788,9.9 C34.4063788,9.6 34.7063788,9.3 35.0063788,9.2 C35.1063788,9.2 35.2063788,9.1 35.3063788,9.1 C35.4063788,9.1 35.4063788,9.1 35.5063788,9.1 C34.6063788,9.8 33.9063788,10.6 33.1063788,11.4 Z M34.8063788,17.9 C34.8063788,17.2 35.0063788,16.8 35.2063788,16.3 C35.1063788,16.9 34.9063788,17.4 34.8063788,17.9 Z" id="Shape"></path>
              </g>
              <g id="Group" transform="translate(0.000000, 0.200000)">
                  <path d="M12.1,23.1 C12.4,23.1 12.6,23 12.9,22.9 L8.6,22.9 C9.7,23.2 10.8,23.3 12.1,23.1 Z" id="Path"></path>
                  <path d="M65,5.3 C65.1,5.7 65.1,6.2 65.2,6.6 L65.2,-3.33066907e-16 L63.2,-3.33066907e-16 C64,1.5 64.7,3.3 65,5.3 L65,5.3 Z" id="Path"></path>
                  <path d="M8.6,22.9 L12.9,22.9 C14.5,22.3 15.5,21 15.2,19.4 L15.2,19.3 C14.8,17.2 12.8,16.4 9.6,16.9 L7.3,17.3 L5.8,13.9 L10.8,6.7 L0.8,8.5 L0,4.2 L0,22.9 L4.1,22.9 L5.4,21.1 C6.5,21.9 7.5,22.5 8.6,22.9 Z" id="Path"></path>
                  <path d="M65.2,10 C64.6,15.4 61.3,19.6 55.9,20.6 C49.1,21.8 43.6,16.8 42.3,9.4 L42.3,9.3 C41.7,5.9 42.1,2.6 43.5,0 L38.1,0 L36.2,4.1 C34.3,3.1 32.8,2.6 30.6,3 C26.8,3.7 26.3,7.6 26.5,9.8 C27.7,8.7 29.2,7.6 31.5,7.2 C36.6,6.4 41,8.5 42,13.8 L42,13.9 C42.7,17.6 41,20.9 38,22.8 L65.3,22.8 C65.2,22.9 65.2,10 65.2,10 Z" id="Path"></path>
                  <path d="M21.1,13.9 L21.1,13.9 C20.1,8 21.2,2.9 24.8,0 L0,0 L0,0.1 L0,3.5 L17.2,0.5 L17.9,4.7 L12.5,12 C16.1,12 19.8,13.2 20.6,18 L20.6,18.1 C20.9,19.8 20.7,21.4 20.1,22.8 L25.5,22.8 C23.6,21.3 22,18.8 21.1,13.9 Z" id="Path"></path>
              </g>
          </g>
      </g>
    </svg>
    {% comment %}<a href="{{ shop.url }}" class="site-header__link site-header__logo-link">{{ shop.name }}</a>{% endcomment %}
  </div>

  <h1>{{ 'gift_cards.issued.subtext' | t }}</h1>
  {% unless gift_card.enabled %}
    <p class="giftcard__tag">{{ 'gift_cards.issued.disabled' | t }}</p>
  {% endunless %}
  {% assign gift_card_expiry_date = gift_card.expires_on | date: format: "basic" %}
  {% if gift_card.expired and gift_card.enabled %}
    <p class="giftcard__tag">{{ 'gift_cards.issued.expired' | t: expiry: gift_card_expiry_date }}</p>
  {% endif %}
  {% if gift_card.expired != true and gift_card.expires_on and gift_card.enabled %}
    <p class="giftcard__tag giftcard__tag--active">{{ 'gift_cards.issued.active' | t: expiry: gift_card_expiry_date }}</p>
  {% endif %}
</header>

<div class="giftcard-wrapper">
  <main class="giftcard" role="main">
    <div class="giftcard__wrap">
      <img src="{{ 'gift-card/card.jpg' | shopify_asset_url }}" class="img-fluid" alt="">

      {%- assign initial_value_size = formatted_initial_value | size -%}
      <div class="h1 giftcard__amount{% if initial_value_size > 6 %} giftcard__amount--medium{% endif %}">
        {% if gift_card.balance != gift_card.initial_value %}
          <span class="giftcard__tooltip">
            <span class="giftcard__tooltip-label">{{ 'gift_cards.issued.remaining_html' | t: balance: gift_card.balance | money }}</span>
          </span>
        {% endif %}
        <strong>{{ formatted_initial_value }}</strong>
      </div>

      {%- assign code_size = gift_card.code | format_code | size -%}
      <div class="giftcard__code">
        <div class="giftcard__code__inner">
          <input type="text"
            class="giftcard__code__text{% if gift_card.expired or gift_card.enabled != true %} disabled{% endif %}"
            id="GiftCardDigits"
            value="{{ gift_card.code | format_code }}"
            aria-label="{{ 'gift_cards.issued.gift_card_code' | t }}"
            readonly />
        </div>
      </div>
    </div>

    <p class="text-center">
      {{ 'gift_cards.issued.redeem_html' | t: value: formatted_initial_value_stripped }}
    </p>

    <div id="QrCode" class="giftcard__qr-code" data-identifier="{{ gift_card.qr_identifier }}"></div>

    <ul class="giftcard-action-list text-center">
      <li class="giftcard-action-list__item">
        <a href="{{ shop.url }}" class="btn btn-style2" target="_blank" rel="noopener" aria-describedby="a11y-new-window-message">{{ 'gift_cards.issued.shop_link' | t }}</a>
      </li>
      <li>
        <button type="button" class="btn btn--secondary print-link" onclick="window.print();">
          {{ 'gift_cards.issued.print' | t }}
        </button>
      </li>
      {% if gift_card.pass_url %}
        <li>
          <a class="giftcard__apple-wallet" href="{{ gift_card.pass_url }}">
            <img class="giftcard__apple-wallet-image" src="{{ 'gift-card/add-to-apple-wallet.svg' | shopify_asset_url }}" width="120" height="40" alt="{{ 'gift_cards.issued.add_to_apple_wallet' | t }}">
          </a>
        </li>
      {% endif %}
    </ul>
  </main>
</div>
